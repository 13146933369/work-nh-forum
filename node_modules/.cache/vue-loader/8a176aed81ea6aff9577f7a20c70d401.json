{"remainingRequest":"F:\\石春阳-2019.0706\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\石春阳-2019.0706\\vue\\src\\views\\microFourm\\MicroFourmUploading.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\石春阳-2019.0706\\vue\\src\\views\\microFourm\\MicroFourmUploading.vue","mtime":1562292208085},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {publicRequestPost} from '../../components/requerst/request'\nimport qs from 'qs'\nexport default {\n    data(){\n        return{\n            action: '',\n            files: [],\n            imgList:\"\",\n            name:\"\",\n            unit:\"\",\n            pageLaryer:false,//浮层显示\n            layerConten:\"\", //浮层内容\n            content:\"\"\n        }\n    },\n    methods: {\n        addedHandler(files) {\n            let that = this\n            let hasIgnore = false;\n            const limitSize = 1 * 1024;\n            // 最大5M\n            const maxSize = 7* 1024 * 1024;\n            for (let i = 0; i< files.length; i++) {\n                const file = files[i];\n                // 如果选择的图片大小最大限制（这里为5M）则弹出提示\n                if (file.size > maxSize) {\n                    that.layerConten = \"照片不能超过7M\"\n                    that.pageLaryer = true\n                    file.ignore = true;\n                    hasIgnore = true;\n                     return\n                }else{\n                    let reads= new FileReader();\n                    reads.readAsDataURL(file);\n                    reads.onload = function(e) {\n                        var bdata = this.result;\n                        that.imgList = bdata\n\n                    }\n                    file && this.$refs.upload.removeFile(file)\n\n                }\n\n            }\n        },\n        errHandler(file) {\n            // const msg = file.response.message\n            this.$createToast({\n                type: 'warn',\n                txt: '请重新上传',\n                time: 1000\n            }).show()\n        },\n        release(){\n            let verrify = /^[\\u4e00-\\u9fa5]+$/;\n            if(!this.imgList){\n                this.pageLaryer = true\n                this.layerConten =\"请上传团队照片\"\n                return\n            }\n\n            if(!verrify.test(this.name)){\n                this.pageLaryer = true\n                this.layerConten =\"请正确填写姓名\"\n                return\n            }\n            if(!this.unit){\n                this.pageLaryer = true\n                this.layerConten =\"请正确填单位\"\n                return\n            }\n            if(!this.content){\n                this.pageLaryer = true\n                this.layerConten =\"请填写观点\"\n                return\n            }\n            this.getData()\n\n        },\n        layerCloseFun(){\n            this.pageLaryer=false\n        },\n        getData(){\n            let imgData = this.imgList.split(\",\")[1]\n            let url = \"/vote/addBbs\"\n            let parameter =qs.stringify({\n                key:\"f94a2ad0-9ec8-11e9-9ca0-525400972e0a\",\n                name: this.name,\n                branch:this.unit,\n                viewpoint:this.content,\n                pic:imgData\n            })\n            publicRequestPost(url,parameter ,this.getDataBack)\n            // 显示loading\n            this.bus.$emit('loading', true);\n        },\n        getDataBack(callBack){\n            // 隐藏loading\n            this.bus.$emit('loading', false);\n            if(callBack.data.status == 2054){\n                this.pageLaryer = true\n                this.layerConten =\"提交失败，请重新提交\"\n                return\n            }\n            if(callBack.data.status == 2052){\n                this.pageLaryer = true\n                this.layerConten =\"提交失败，请重新提交\"\n                return\n            }\n            if(callBack.data.status == 2051){\n                this.pageLaryer = true\n                this.layerConten =\"提交失败，请重新提交\"\n                return\n            }\n            if(callBack.data.status == 2050){\n                this.$router.push({\n                    path:\"/microFourm/microFourmDefault\"\n                })\n            }\n        },\n    }\n}\n",{"version":3,"sources":["MicroFourmUploading.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MicroFourmUploading.vue","sourceRoot":"src/views/microFourm","sourcesContent":["<template>\r\n    <div class=\"MicroFourmUploading\">\r\n        <div class=\"microShowUpHead\"></div>\r\n        <div class=\"microShowUpOutBox\">\r\n            <div class=\"microShowUpImg\">\r\n                <div class=\"microShowUpBg\">\r\n                    <cube-upload\r\n                            ref=\"upload\"\r\n                            :simultaneous-uploads=\"1\"\r\n                            v-model=\"files\"\r\n                            action=\"#\"\r\n                            :max = \"1\"\r\n                            :auto=\"false\"\r\n                            @files-added=\"addedHandler\"\r\n                            @file-error=\"errHandler\">\r\n                        <div class=\"clear-fix\">\r\n                            <cube-upload-file v-for=\"(file, i) in files\" :file=\"file\" :key=\"i\"></cube-upload-file>\r\n                            <cube-upload-btn :multiple=\"false\">\r\n                                <div>\r\n                                    <i>＋</i>\r\n                                    <p style=\"color:#fff;font-size:12px;margin-top:5px\">上传照片</p>\r\n                                    <p style=\"color:#fff;font-size:12px;margin-top:5px\">建议尺寸为横板</p>\r\n                                </div>\r\n                            </cube-upload-btn>\r\n                        </div>\r\n                    </cube-upload>\r\n                    <!--<div  class=\"upLoadingName\">上传团队照片</div>-->\r\n                </div>\r\n            </div>\r\n            <div class=\"microShowUpConten\">\r\n                <div class=\"microShowInputName\">\r\n                    <div class=\"microShowInputLine\">姓名</div>\r\n                    <input type=\"text\" maxlength=\"5\" class=\"microShowInputData\" v-model=\"name\"/>\r\n                </div>\r\n                <div class=\"microShowInputName\">\r\n                    <div class=\"microShowInputLine\">单位</div>\r\n                    <input type=\"text\" maxlength=\"15\" class=\"microShowInputData\" v-model=\"unit\"/>\r\n                </div>\r\n                <div class=\"manifestoBor\">\r\n\r\n                    <textarea rows=\"10\" cols=\"30\" class=\"manifestoContent\" maxlength=\"200\" placeholder=\"我的观点\" v-model=\"content\"></textarea>\r\n                </div>\r\n                <div class=\"microShowSubmit\" @click=\"release()\">发布</div>\r\n            </div>\r\n        </div>\r\n        <!--底部菜单栏-->\r\n        <div class=\"microClassFoot\">\r\n            <div class=\"microClassFootBox\">\r\n                <div class=\"flexBut\">\r\n                    <router-link :to=\"{path:'/microClass/microClassDefault'}\">\r\n                        <img src=\"../../assets/but_3.png\">\r\n                        <div class=\"flexFont\">微课堂</div>\r\n                    </router-link>\r\n                </div>\r\n                <div class=\"flexBut\">\r\n                    <router-link :to=\"{path:'/microFourm/microFourmDefault'}\">\r\n                        <img src=\"../../assets/but_2.png\">\r\n                        <div class=\"flexFont\">微展示</div>\r\n                    </router-link>\r\n                </div>\r\n                <div class=\"flexBut\">\r\n                    <router-link :to=\"{path:'/'}\">\r\n                        <img src=\"../../assets/but_1.png\">\r\n                        <div class=\"flexFont\">首页</div>\r\n                    </router-link>\r\n                </div>\r\n                <div class=\"flexBut\">\r\n                    <router-link :to=\"{path:'/broadcast/broadcastDefault'}\">\r\n                        <img src=\"../../assets/but_4.png\">\r\n                        <div class=\"flexFont\">动态播报</div>\r\n                    </router-link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--浮层开始-->\r\n        <div class=\"pageLaryer\" v-if=\"pageLaryer\">\r\n            <div class=\"paglaryerBox\">\r\n                <img src=\"../../assets/layerBor.png\" class=\"layerImg\" >\r\n                <div class=\"layerText\">{{layerConten}}</div>\r\n                <img class=\"layerClose\" src=\"../../assets/layerClose.png\" @click=\"layerCloseFun\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {publicRequestPost} from '../../components/requerst/request'\r\n    import qs from 'qs'\r\n    export default {\r\n        data(){\r\n            return{\r\n                action: '',\r\n                files: [],\r\n                imgList:\"\",\r\n                name:\"\",\r\n                unit:\"\",\r\n                pageLaryer:false,//浮层显示\r\n                layerConten:\"\", //浮层内容\r\n                content:\"\"\r\n            }\r\n        },\r\n        methods: {\r\n            addedHandler(files) {\r\n                let that = this\r\n                let hasIgnore = false;\r\n                const limitSize = 1 * 1024;\r\n                // 最大5M\r\n                const maxSize = 7* 1024 * 1024;\r\n                for (let i = 0; i< files.length; i++) {\r\n                    const file = files[i];\r\n                    // 如果选择的图片大小最大限制（这里为5M）则弹出提示\r\n                    if (file.size > maxSize) {\r\n                        that.layerConten = \"照片不能超过7M\"\r\n                        that.pageLaryer = true\r\n                        file.ignore = true;\r\n                        hasIgnore = true;\r\n                         return\r\n                    }else{\r\n                        let reads= new FileReader();\r\n                        reads.readAsDataURL(file);\r\n                        reads.onload = function(e) {\r\n                            var bdata = this.result;\r\n                            that.imgList = bdata\r\n\r\n                        }\r\n                        file && this.$refs.upload.removeFile(file)\r\n\r\n                    }\r\n\r\n                }\r\n            },\r\n            errHandler(file) {\r\n                // const msg = file.response.message\r\n                this.$createToast({\r\n                    type: 'warn',\r\n                    txt: '请重新上传',\r\n                    time: 1000\r\n                }).show()\r\n            },\r\n            release(){\r\n                let verrify = /^[\\u4e00-\\u9fa5]+$/;\r\n                if(!this.imgList){\r\n                    this.pageLaryer = true\r\n                    this.layerConten =\"请上传团队照片\"\r\n                    return\r\n                }\r\n\r\n                if(!verrify.test(this.name)){\r\n                    this.pageLaryer = true\r\n                    this.layerConten =\"请正确填写姓名\"\r\n                    return\r\n                }\r\n                if(!this.unit){\r\n                    this.pageLaryer = true\r\n                    this.layerConten =\"请正确填单位\"\r\n                    return\r\n                }\r\n                if(!this.content){\r\n                    this.pageLaryer = true\r\n                    this.layerConten =\"请填写观点\"\r\n                    return\r\n                }\r\n                this.getData()\r\n\r\n            },\r\n            layerCloseFun(){\r\n                this.pageLaryer=false\r\n            },\r\n            getData(){\r\n                let imgData = this.imgList.split(\",\")[1]\r\n                let url = \"/vote/addBbs\"\r\n                let parameter =qs.stringify({\r\n                    key:\"f94a2ad0-9ec8-11e9-9ca0-525400972e0a\",\r\n                    name: this.name,\r\n                    branch:this.unit,\r\n                    viewpoint:this.content,\r\n                    pic:imgData\r\n                })\r\n                publicRequestPost(url,parameter ,this.getDataBack)\r\n                // 显示loading\r\n                this.bus.$emit('loading', true);\r\n            },\r\n            getDataBack(callBack){\r\n                // 隐藏loading\r\n                this.bus.$emit('loading', false);\r\n                if(callBack.data.status == 2054){\r\n                    this.pageLaryer = true\r\n                    this.layerConten =\"提交失败，请重新提交\"\r\n                    return\r\n                }\r\n                if(callBack.data.status == 2052){\r\n                    this.pageLaryer = true\r\n                    this.layerConten =\"提交失败，请重新提交\"\r\n                    return\r\n                }\r\n                if(callBack.data.status == 2051){\r\n                    this.pageLaryer = true\r\n                    this.layerConten =\"提交失败，请重新提交\"\r\n                    return\r\n                }\r\n                if(callBack.data.status == 2050){\r\n                    this.$router.push({\r\n                        path:\"/microFourm/microFourmDefault\"\r\n                    })\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.MicroFourmUploading\r\n    width: 100%\r\n    height 100%\r\n    background-color #fff\r\n    font-family:\"微软雅黑\"\r\n    .pageLaryer\r\n        position absolute\r\n        left 0\r\n        top 0\r\n        width 100%\r\n        height 100%\r\n        background-color rgba(76,76,76,0.8)\r\n        .paglaryerBox\r\n            width 424px\r\n            height 130px\r\n            position absolute\r\n            left 50%\r\n            top 50%\r\n            -webkit-transform translate(-50%,-50%)\r\n            transform translate(-50%,-50%)\r\n            .layerImg\r\n                position absolute\r\n                width 424px\r\n                height 130px\r\n                text-align center\r\n            .layerText\r\n                width 300px\r\n                height 100px\r\n                position absolute\r\n                top 30px\r\n                text-align:center\r\n                left 50%\r\n                -webkit-transform translate(-50%,0)\r\n                transform translate(-50%,0)\r\n                font-size 30px\r\n                color:#000\r\n            .layerClose\r\n                width 38px\r\n                height 38px\r\n                position absolute\r\n                top 150px\r\n                left 50%\r\n                -webkit-transform translate(-50%,0)\r\n                transform translate(-50%,0)\r\n\r\n    .microShowUpHead\r\n            position absolutea\r\n            top:0\r\n            left 0\r\n            width 100%\r\n            height 375px\r\n            background-color #ace9c5\r\n    .microShowUpOutBox\r\n        position absolute\r\n        top:30px\r\n        left 50%\r\n        transform translate(-50%,50)\r\n        -webkit-transform translate(-50%,0)\r\n        width 695px\r\n        height 1050px\r\n        border 1px solid #e7e7e7\r\n        background-color #fff\r\n        border-radius 2%\r\n        box-shadow:black 0px 0px 8px;\r\n        .microShowUpImg\r\n            width 430px\r\n            height 290px;\r\n            position absolute\r\n            left 50%;\r\n            -webkit-transform translate(-50%,0)\r\n            transform translate(-50%,0)\r\n            top:85px;\r\n            border 1px dashed #ace9c5\r\n            .microShowUpBg\r\n                position absolute\r\n                left 50%;\r\n                top:12px;\r\n                -webkit-transform translate(-50%,0)\r\n                transform translate(-50%,0)\r\n                width:410px\r\n                height 265px\r\n                background-color:#ace9c5\r\n                .microShowUpPic\r\n                    width 88px\r\n                    height 89px\r\n                    position absolute\r\n                    left 50%;\r\n                    top:50%\r\n                    -webkit-transform translate(-50%,-50%)\r\n                    transform translate(-50%,-50%)\r\n                .upLoadingName\r\n                    position absolute\r\n                    left 50%;\r\n                    -webkit-transform translate(-50%,-50%)\r\n                    transform translate(-50%,-50%)\r\n                    top 200px\r\n                    font-size 28px\r\n                    text-align center\r\n                    color #fff\r\n\r\n\r\n        .microShowUpConten\r\n            position absolute\r\n            left 50%\r\n            top 380px\r\n            transform translate(-50%,50)\r\n            -webkit-transform translate(-50%,0)\r\n            width 430px\r\n            height 550px\r\n            .microShowInputName\r\n                width 430px\r\n                height 60px\r\n                background-color #f6f6ff\r\n                border-radius 5px\r\n                margin-top 30px\r\n                .microShowInputLine\r\n                    position absolute\r\n                    left 0\r\n                    width 150px\r\n                    height 60px\r\n                    color #fff\r\n                    font-size 30px\r\n                    text-align center\r\n                    background-color #ace9c5\r\n                    line-height 60px\r\n                    border-top-left-radius 5px\r\n\r\n\r\n                .microShowInputData\r\n                    position absolute\r\n                    font-family \"微软雅黑\"\r\n                    left 160px\r\n                    width 260px\r\n                    height 60px\r\n                    background-color:transparent\r\n                    outline:none\r\n                    color #000\r\n                    font-size 30px\r\n                input::-webkit-input-placeholder\r\n                          color #929292\r\n\r\n\r\n            .manifestoBor\r\n                width 430px\r\n                height 250px\r\n                border-radius 5px\r\n                border 2px solid #e7e7e7\r\n                margin-top 30px\r\n                .manifestoLine\r\n                    width 400px\r\n                    height 5px\r\n                    background-color:#ace9c5\r\n                    border-radius 2px\r\n                    margin 0 auto\r\n                    margin-top 20px\r\n                .manifestoText\r\n                    text-align center\r\n                    color #929292\r\n                    font-size 40px\r\n                    margin 0 auto\r\n                    margin-top 20px\r\n                .manifestoContent\r\n                    width 400px;\r\n                    height 210px\r\n                    background-color:transparent\r\n                    outline:none\r\n                    color #000\r\n                    margin-top 20px\r\n                    margin-left 10px\r\n                    overflow-x  hidden\r\n                    line-height 40px\r\n                    border none\r\n                    font-size 25px\r\n                .manifestoContent::-webkit-input-placeholder {\r\n                    color #a09d9d\r\n                    text-align center\r\n                    line-height 150px\r\n                    font-size 30px\r\n\r\n                }\r\n\r\n            .microShowSubmit\r\n                width 200px\r\n                height 70px\r\n                border-radius 35px\r\n                background-color:#ace9c5\r\n                margin 0 auto\r\n                margin-top 20px\r\n                color #fff\r\n                font-size 30px\r\n                text-align center\r\n                line-height 70px\r\n\r\n    .cube-upload\r\n        .cube-upload-file\r\n\r\n        .cube-upload-btn\r\n            margin-top 30px\r\n            height: 264px\r\n        .cube-upload-file\r\n            margin: 0\r\n            /*box-sizing border-box;*/\r\n            /*padding 10px*/\r\n            + .cube-upload-btn\r\n                margin-top: -200px\r\n                opacity: 0\r\n        /deep/.cube-upload-file-def\r\n            height :100%;\r\n            width : 100%;\r\n            background-size contain;\r\n            overflow hidden\r\n            .cubeic-wrong\r\n                display: none\r\n        .cube-upload-btn\r\n            display: flex\r\n            align-items: center\r\n            justify-content: center\r\n            > div\r\n                text-align: center\r\n            i\r\n                display: inline-flex\r\n                align-items: center\r\n                justify-content: center\r\n                width: 70px\r\n                height: 70px\r\n                margin-bottom: 20px\r\n                font-size: 40px\r\n                line-height: 1\r\n                font-style: normal\r\n                color: #ace9c5\r\n                background-color: #fff\r\n                border-radius: 50%\r\n    .microClassFoot\r\n        position absolute\r\n        left 0\r\n        bottom 0\r\n        width 100%;\r\n        height 120px\r\n        background #ACE9C5\r\n        .microClassFootBox\r\n            width 650px\r\n            height 120px\r\n            margin 0 auto\r\n            display flex\r\n            flex-direction row\r\n            flex-wrap wrap\r\n            .flexBut\r\n                text-align center\r\n                width 120px;\r\n                height 90px\r\n                margin 0 20px\r\n                margin-top 13px\r\n                img\r\n                    height 66px\r\n            .flexFont\r\n                font-family:\"微软雅黑\";\r\n                margin-top 2px\r\n                font-size 24px;\r\n                color #000000\r\n                font-weight bold\r\n\r\n\r\n\r\n\r\n</style>"]}]}