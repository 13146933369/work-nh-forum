{"remainingRequest":"F:\\石春阳-2019.0706\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\石春阳-2019.0706\\vue\\src\\views\\microFourm\\MicroFourmDetails.vue?vue&type=style&index=0&id=bbd95804&scoped=true&lang=stylus&","dependencies":[{"path":"F:\\石春阳-2019.0706\\vue\\src\\views\\microFourm\\MicroFourmDetails.vue","mtime":1562506993301},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\石春阳-2019.0706\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    .bg{\n        width : 100%;\n        height: 100%;\n        position: relative;\n        top: 0;\n        left: 0;\n    }\n    .bg .img-bg{\n        width: 750px;\n        height:1334px;\n    }\n    .bg .img-1{\n        width: 750px;\n        height:1334px;\n        position: absolute;\n        top: 0;\n        left:0;\n    }\n        .bg .pic{\n            position: absolute;\n            top: 97px;\n            left:50%;\n            margin-left:-230px;\n            width : 458px;\n            height:310px;\n            display : flex;\n            justify-content : center;\n        }\n    .bg .img-2{\n       max-width : 100%;\n        max-height:100%;\n    }\n\n    .microClassFoot{\n        position: fixed;\n        left: 0;\n        bottom: 0;\n        width : 750px;\n        height :120px ;\n        background : #ACE9C5;\n    }\n    .bg .vname{\n        width : 500px;\n        font-size: 25px;\n        position: absolute;\n        left:160px;\n        top: 440px;\n    }\n    .bg .vyh{\n        width : 500px;\n        font-size: 25px;\n        position: absolute;\n        left:160px;\n        top:492px;\n    }\n    .microClassFootBox{\n        width : 650px;\n        height : 120px;\n        margin : 0 auto;\n        display :flex;\n        flex-direction : row;\n        flex-wrap: wrap;\n    }\n\n    .flexBut{\n        text-align : center;\n        width : 120px;\n        height :90px;\n        margin : 0 20px;\n        margin-top : 13px;\n    }\n\n    .flexBut img{\n        height : 66px;\n    }\n\n    .flexFont{\n        font-family:\"微软雅黑\";\n        margin-top : 2px;\n        font-size : 24px;\n        color  : #000000;\n        font-weight : bold;\n    }\n\n    .microFourmButBox{\n        position : absolute;\n        bottom : 140px;\n        left : 50%;\n        transform:translate(-50%,0);\n        display  : flex;\n    }\n\n\n    .microShowBut{\n        font-size : 28px;\n        width :  175px;\n        height : 55px;\n        text-align : center;\n        color:#7fdba4;\n        background-color : #fff;\n        border-radius : 30px;\n        line-height : 55px;\n        margin : 0 30px;\n        border : 1px solid #000;\n        box-shadow : 0px 0px 10px #eeeeee;\n    }\n\n.img-user{\n    width : 750px;\n    height:1334px;\n    display : none;\n}\n    .microFourDLike{\n        width :180px;\n        height: 90px;\n        position: absolute;\n        top : 425px;\n        left : 470px;\n    }\n    .microFourDLikeImg{\n        width : 65px;\n        height : 65px;\n        position : absolute;\n        top : 0;\n        left : 0;\n    }\n    .microFourDLikeText{\n        position : absolute;\n        top : 15px;\n        left : 90px;\n        font-size : 28px;\n        color : #afeac7;\n    }\n  .bg  .content\n        position absolute;\n        font-size : 24px;\n        width 460px\n        height:320px\n        left:150px;\n        top:600px;\n        word-wrap:break-word;\n        overflow-x :hidden;\n        overflow scroll;\n\n    .pageLaryer\n        position absolute\n        left 0\n        top 0\n        width 100%\n        height 100%\n        background-color rgba(76,76,76,0.8)\n        .paglaryerBox\n            width 424px\n            height 130px\n            position absolute\n            left 50%\n            top 50%\n            -webkit-transform translate(-50%,-50%)\n            transform translate(-50%,-50%)\n            .layerImg\n                position absolute\n                width 424px\n                height 130px\n                text-align center\n            .layerText\n                width 300px\n                height 100px\n                position absolute\n                top 30px\n                text-align:center\n                left 50%\n                -webkit-transform translate(-50%,0)\n                transform translate(-50%,0)\n                font-size 30px\n                color:#000\n            .layerClose\n                width 38px\n                height 38px\n                position absolute\n                top 150px\n                left 50%\n                -webkit-transform translate(-50%,0)\n                transform translate(-50%,0)\n\n\n\n    .code\n        position absolute;\n        bottom  260px;\n        left:50%;\n        margin-left  -40px;\n        width 80px;\n        height:80px;\n        display none;\n\n\n",{"version":3,"sources":["MicroFourmDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MicroFourmDetails.vue","sourceRoot":"src/views/microFourm","sourcesContent":["<template>\r\n    <div>\r\n        <!-- SOURCE -->\r\n        <div ref=\"printMe\" class=\"bg\" v-if=\"data1\">\r\n            <img src=\"../../assets/bg.jpg\" class=\"img-bg\"/>\r\n            <img src=\"../../assets/canvasBor.png\" class=\"img-1\"/>\r\n            <div class=\"pic\">\r\n                <img :src=\"imgUrl+data1.pic\" class=\"img-2\" id=\"reqImage\" ref=\"reqImage\">\r\n            </div>\r\n            <div class=\"vname\" >{{data1.name}}</div>\r\n            <div class=\"vyh\">{{data1.branch}}</div>\r\n            <div class=\"microFourDLike\" v-if=\"showLike\">\r\n                <img src=\"../../assets/heart.png\" class=\"microFourDLikeImg\" @click=\"microFourDLikeFun\">\r\n                <div class=\"microFourDLikeText\">{{vote}}</div>\r\n            </div>\r\n            <div class=\"content\">\r\n                {{data1.viewpoint}}\r\n            </div>\r\n            <img :src=\"bgImg3Src\" class=\"code\" ref=\"code\">\r\n        </div>\r\n\r\n        <div class=\"microFourmButBox\" v-if=\"showBut\">\r\n            <!--<div class=\"microShowBut\" @click=\"\">呼唤朋友</div>-->\r\n            <div class=\"microShowBut\" @click=\"createImg\" ref=\"drawBtn\" v-if=\"data1&&bgImg3Src\">生成图片</div>\r\n        </div>\r\n        <!-- OUTPUT -->\r\n        <img :src=\"output\" class=\"img-user\" ref=\"imgUser\">\r\n\r\n        <div class=\"microClassFoot\">\r\n            <div class=\"microClassFootBox\">\r\n                <div class=\"flexBut\">\r\n                    <router-link :to=\"{path:'/microClass/microClassDefault'}\">\r\n                        <img src=\"../../assets/but_3.png\">\r\n                        <div class=\"flexFont\">微课堂</div>\r\n                    </router-link>\r\n                </div>\r\n                <div class=\"flexBut\">\r\n                    <router-link :to=\"{path:'/microFourm/microFourmDefault'}\">\r\n                        <img src=\"../../assets/but_2.png\">\r\n                        <div class=\"flexFont\">微论坛</div>\r\n                    </router-link>\r\n                </div>\r\n                <div class=\"flexBut\">\r\n                    <router-link :to=\"{path:'/'}\">\r\n                        <img src=\"../../assets/but_1.png\">\r\n                        <div class=\"flexFont\">首页</div>\r\n                    </router-link>\r\n                </div>\r\n                <div class=\"flexBut\">\r\n                    <router-link :to=\"{path:'/broadcast/broadcastDefault'}\">\r\n                        <img src=\"../../assets/but_4.png\">\r\n                        <div class=\"flexFont\">动态播报</div>\r\n                    </router-link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!--浮层开始-->\r\n        <div class=\"pageLaryer\" v-if=\"pageLaryer\">\r\n        <div class=\"paglaryerBox\">\r\n        <img src=\"../../assets/layerBor.png\" class=\"layerImg\" >\r\n        <div class=\"layerText\">{{layerConten}}</div>\r\n        <img class=\"layerClose\" src=\"../../assets/layerClose.png\" @click=\"layerCloseFun\">\r\n        </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import html2canvas from 'html2canvas'\r\n    import {publicRequestPost} from '../../components/requerst/request'\r\n    import qs from 'qs'\r\n    import {shareFun} from '../../components/share/share'\r\n\r\n    export default {\r\n        created(){\r\n\r\n        },\r\n        data() {\r\n            return {\r\n                bgImg3Src : null,\r\n                output: null,\r\n                content:\"\",\r\n                vote:\"\",\r\n                imgUrl:this.GLOBAL.imgUrl,\r\n                showBut:true, // 按钮显示\r\n                showLike:true, //点赞显示\r\n                imgTextSrc:\"\", //链接地址\r\n                showImg:false, //合同图片显示\r\n                pageLaryer:false,//浮层显示\r\n                layerConten:\"\",\r\n                id:this.$route.query.id,\r\n                data1 : null,\r\n                bgImg1Src:\"\"\r\n            }\r\n        },\r\n        mounted(){\r\n            this.getData()\r\n            this.drawCode();\r\n            let shartData ={\r\n                title:this.GLOBAL.sharTitle,\r\n                id:this.id,\r\n                imgageUrl:this.bgImg1Src\r\n            }\r\n            shareFun(shartData)\r\n        },\r\n        methods: {\r\n            createImg() {\r\n                 var html = this.$refs.printMe;\r\n                 var btn = this.$refs.drawBtn;\r\n\r\n                 var width = html.offsetWidth;\r\n                 var height = html.offsetHeight;\r\n\r\n                 var getPixelRatio = function (context) {\r\n                     var backingStore = context.backingStorePixelRatio ||\r\n                         context.webkitBackingStorePixelRatio ||\r\n                         context.mozBackingStorePixelRatio ||\r\n                         context.msBackingStorePixelRatio ||\r\n                         context.oBackingStorePixelRatio ||\r\n                         context.backingStorePixelRatio || 1;\r\n                     return (window.devicePixelRatio || 1) / backingStore;\r\n                 };\r\n                 var canvas = document.createElement(\"canvas\");\r\n                 var context =canvas.getContext('2d')\r\n\r\n                 var scale = getPixelRatio(context);\r\n                 // alert(scale)\r\n                 // alert(width*scale)\r\n                 var opts = {\r\n                     scale : scale,\r\n                     width : width,\r\n                     height : height,\r\n                     useCORS : true\r\n                 }\r\n                 this.$refs.code.style.display = \"block\"\r\n                 var that = this;\r\n                 html2canvas(html,opts).then(canvas => {\r\n                    html.style.display = \"none\"\r\n                    btn.style.display = \"none\"\r\n                     var imgUrl= canvas.toDataURL(\"png\"); // 获取生成的图片的url\r\n                    this.output = imgUrl;\r\n                     var userimg = that.$refs.imgUser\r\n                     userimg.style.display = \"block\"\r\n\r\n                 })\r\n            },\r\n            getData(){\r\n                let url = \"/vote/bbsInfo\"\r\n                let parameter =qs.stringify({\r\n                    id:this.id\r\n                })\r\n                publicRequestPost(url,parameter ,this.getDataBack)\r\n                // 显示loading\r\n                this.bus.$emit('loading', true);\r\n            },\r\n            getDataBack(callBack){\r\n                // 隐藏loading\r\n                this.bus.$emit('loading', false);\r\n                let self = this\r\n                if(callBack.data.status == 2040){\r\n                    let item = callBack.data.data.info\r\n                    let vote = callBack.data.data.vote\r\n                    self.bgImg1Src = this.imgUrl + item.pic\r\n                    console.log(self.bgImg1Src)\r\n//                    self.data1.name = item.name\r\n//                    self.data2.name = item.branch\r\n//                    self.content = item.viewpoint\r\n//\r\n                    self.vote = vote\r\n                    self.data1 = item;\r\n//                    var img = self.$refs.reqImg\r\n//                    img.style.width = \"200px\";\r\n//                    img.style.height = \"200px\";\r\n                }\r\n\r\n            },\r\n            // 画二维码\r\n            drawCode(){\r\n                let url = \"/vote/getSpCode\"\r\n                let parameter =qs.stringify({\r\n                    id:this.id\r\n                })\r\n                publicRequestPost(url,parameter ,this.drawCodeBack)\r\n            },\r\n            drawCodeBack(callBack){\r\n                if(callBack.data.status == 2150){\r\n                    let item =callBack.data.data.url\r\n                    this.bgImg3Src = this.imgUrl+item\r\n                    console.log(this.bgImg3Src)\r\n                }\r\n            },\r\n            microFourDLikeFun(){\r\n                this.getVote()\r\n            },\r\n            getVote(){\r\n                let url = \"/vote/vote\"\r\n                let parameter =qs.stringify({\r\n                    id:this.id,\r\n                    key:111111\r\n                })\r\n                publicRequestPost(url,parameter ,this.getVoteBack)\r\n            },\r\n            getVoteBack(callBack){\r\n                if(callBack.data.status == 2100){\r\n                    this.layerConten=\"投票成功\"\r\n                    this.pageLaryer=true\r\n                    return\r\n                }\r\n                if(callBack.data.status == 2103){\r\n                    this.layerConten=\"没有投票次数\"\r\n                    this.pageLaryer=true\r\n                    return\r\n                }\r\n                if(callBack.data.status == 2104){\r\n                    this.layerConten=\"投票失败\"\r\n                    this.pageLaryer=true\r\n                    return\r\n                }\r\n                if(callBack.data.status == 2103){\r\n                    this.layerConten=\"没有此用户\"\r\n                    this.pageLaryer=true\r\n                    return\r\n                }\r\n                if(callBack.data.status == 2103){\r\n                    this.layerConten=\"参数有误\"\r\n                    this.pageLaryer=true\r\n                    return\r\n                }\r\n            },\r\n            layerCloseFun(){\r\n                this.pageLaryer=false\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style  scoped lang=\"stylus\" type=\"text/stylus\" >\r\n\r\n\r\n    .bg{\r\n        width : 100%;\r\n        height: 100%;\r\n        position: relative;\r\n        top: 0;\r\n        left: 0;\r\n    }\r\n    .bg .img-bg{\r\n        width: 750px;\r\n        height:1334px;\r\n    }\r\n    .bg .img-1{\r\n        width: 750px;\r\n        height:1334px;\r\n        position: absolute;\r\n        top: 0;\r\n        left:0;\r\n    }\r\n        .bg .pic{\r\n            position: absolute;\r\n            top: 97px;\r\n            left:50%;\r\n            margin-left:-230px;\r\n            width : 458px;\r\n            height:310px;\r\n            display : flex;\r\n            justify-content : center;\r\n        }\r\n    .bg .img-2{\r\n       max-width : 100%;\r\n        max-height:100%;\r\n    }\r\n\r\n    .microClassFoot{\r\n        position: fixed;\r\n        left: 0;\r\n        bottom: 0;\r\n        width : 750px;\r\n        height :120px ;\r\n        background : #ACE9C5;\r\n    }\r\n    .bg .vname{\r\n        width : 500px;\r\n        font-size: 25px;\r\n        position: absolute;\r\n        left:160px;\r\n        top: 440px;\r\n    }\r\n    .bg .vyh{\r\n        width : 500px;\r\n        font-size: 25px;\r\n        position: absolute;\r\n        left:160px;\r\n        top:492px;\r\n    }\r\n    .microClassFootBox{\r\n        width : 650px;\r\n        height : 120px;\r\n        margin : 0 auto;\r\n        display :flex;\r\n        flex-direction : row;\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    .flexBut{\r\n        text-align : center;\r\n        width : 120px;\r\n        height :90px;\r\n        margin : 0 20px;\r\n        margin-top : 13px;\r\n    }\r\n\r\n    .flexBut img{\r\n        height : 66px;\r\n    }\r\n\r\n    .flexFont{\r\n        font-family:\"微软雅黑\";\r\n        margin-top : 2px;\r\n        font-size : 24px;\r\n        color  : #000000;\r\n        font-weight : bold;\r\n    }\r\n\r\n    .microFourmButBox{\r\n        position : absolute;\r\n        bottom : 140px;\r\n        left : 50%;\r\n        transform:translate(-50%,0);\r\n        display  : flex;\r\n    }\r\n\r\n\r\n    .microShowBut{\r\n        font-size : 28px;\r\n        width :  175px;\r\n        height : 55px;\r\n        text-align : center;\r\n        color:#7fdba4;\r\n        background-color : #fff;\r\n        border-radius : 30px;\r\n        line-height : 55px;\r\n        margin : 0 30px;\r\n        border : 1px solid #000;\r\n        box-shadow : 0px 0px 10px #eeeeee;\r\n    }\r\n\r\n.img-user{\r\n    width : 750px;\r\n    height:1334px;\r\n    display : none;\r\n}\r\n    .microFourDLike{\r\n        width :180px;\r\n        height: 90px;\r\n        position: absolute;\r\n        top : 425px;\r\n        left : 470px;\r\n    }\r\n    .microFourDLikeImg{\r\n        width : 65px;\r\n        height : 65px;\r\n        position : absolute;\r\n        top : 0;\r\n        left : 0;\r\n    }\r\n    .microFourDLikeText{\r\n        position : absolute;\r\n        top : 15px;\r\n        left : 90px;\r\n        font-size : 28px;\r\n        color : #afeac7;\r\n    }\r\n  .bg  .content\r\n        position absolute;\r\n        font-size : 24px;\r\n        width 460px\r\n        height:320px\r\n        left:150px;\r\n        top:600px;\r\n        word-wrap:break-word;\r\n        overflow-x :hidden;\r\n        overflow scroll;\r\n\r\n    .pageLaryer\r\n        position absolute\r\n        left 0\r\n        top 0\r\n        width 100%\r\n        height 100%\r\n        background-color rgba(76,76,76,0.8)\r\n        .paglaryerBox\r\n            width 424px\r\n            height 130px\r\n            position absolute\r\n            left 50%\r\n            top 50%\r\n            -webkit-transform translate(-50%,-50%)\r\n            transform translate(-50%,-50%)\r\n            .layerImg\r\n                position absolute\r\n                width 424px\r\n                height 130px\r\n                text-align center\r\n            .layerText\r\n                width 300px\r\n                height 100px\r\n                position absolute\r\n                top 30px\r\n                text-align:center\r\n                left 50%\r\n                -webkit-transform translate(-50%,0)\r\n                transform translate(-50%,0)\r\n                font-size 30px\r\n                color:#000\r\n            .layerClose\r\n                width 38px\r\n                height 38px\r\n                position absolute\r\n                top 150px\r\n                left 50%\r\n                -webkit-transform translate(-50%,0)\r\n                transform translate(-50%,0)\r\n\r\n\r\n\r\n    .code\r\n        position absolute;\r\n        bottom  260px;\r\n        left:50%;\r\n        margin-left  -40px;\r\n        width 80px;\r\n        height:80px;\r\n        display none;\r\n\r\n\r\n</style>"]}]}